<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Swagger UI</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui.css" >
  <style>
    html
    {
      box-sizing: border-box;
      overflow: -moz-scrollbars-vertical;
      overflow-y: scroll;
    }
    *,
    *:before,
    *:after
    {
      box-sizing: inherit;
    }
    body {
      margin:0;
      background: #fafafa;
    }
  </style>
</head>
<body>
<div id="swagger-ui"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-bundle.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-standalone-preset.js"> </script>
<script>
window.onload = function() {
  var spec = {"openapi":"3.0.0","info":{"version":"1.0.0","title":"Backend","description":"# Установка и запуск\n```bash\nnpm install\nnpm start\n```\nбез инициализации бд\n```bash\nnpm install\nnpm run start:noinit\n```\n# Экспорт OpenAPI json\n```bash\nnpm install\nnpm run exportapi\n```\n# src/music/config.json\n```json\n[\n  {\n    \"name\": \"game 1\",\n\n    \"tag\": {\n      \"example\": \"This contains the information on which the playlist interface should be based\",\n      \"background\": \"image...\",\n      \"colors\": [ \"#123123\", \"#333333\", \"#321321\" ]\n    },\n\n    \"music\": [\n      {\n        \"name\": \"Седая ночь\",\n        \"author\": \"Юрий Шатунов\",\n        \"filename\": \"audio.mp3\",\n        \"tag\": {\n          \"data\": \"...\",\n          \"background\": \"image...\",\n          \"colors\": [ \"#123123\", \"#333333\", \"#321321\" ]\n        }\n      }\n    ]\n  }\n]\n```\n"},"paths":{"/api/user/updateBackground":{"parameters":[]},"/api/user/updateAvatar":{"parameters":[]},"/api/user/signup":{"parameters":[],"post":{"summary":"Register a new user","description":"Adds a new user to the user database","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"}}}}}},"responses":{"200":{"description":"Successful login","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true}}},"examples":{"Successful login":{"value":{"error":null}}}}}},"400":{"description":"Invalid credentials","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Login already used":{"value":{"error":{"error_code":1,"msg":"Логин уже использован"}}},"Error during registration":{"value":{"error":{"error_code":12345,"msg":"Ошибка при регистрации"}}}}}}}}}},"/api/user/signin":{"parameters":[],"post":{"summary":"Sign in a user","description":"Authenticates the user, writes the JWT token to a cookie and returns it.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"Successful login","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true},"token":{"type":"string"}}},"examples":{"return token":{"value":{"error":null,"token":"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NSIsIm5hbWUiOiJKb2huIEdvbGQiLCJhZG1pbiI6dHJ1ZX0K.LIHjWCBORSWMEibq-tnT8ue_deUqZx1K0XxCOXZRrBI"}}}}}},"400":{"description":"Invalid credentials","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"User not found":{"value":{"error":{"error_code":0,"msg":"Пользователь не найден"}}},"Incorrect password":{"value":{"error":{"error_code":0,"msg":"Неверный пароль"}}}}}}}}}},"/api/user/logout":{"parameters":[],"get":{"summary":"Logout a user","description":"Removes token from cookie","parameters":[],"responses":{"200":{"description":"Successful logout","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true}}},"examples":{"Successful logout":{"value":{"error":null}}}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}}}}},"/api/user/info":{"parameters":[],"get":{"summary":"Получить данные пользователя","description":"Возвращает данные о текущем пользователе","responses":{"200":{"description":"Успешный ответ","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"},"login":{"type":"string"},"name":{"type":"string"},"avatar_url":{"type":"string","nullable":true},"background_url":{"type":"string","nullable":true}}}}}},"404":{"description":"Пользователь не найден"},"500":{"description":"Ошибка сервера"}}}},"/api/music/playlists":{"parameters":[],"get":{"summary":"Get all playlists","description":"Retrieves a list of all playlists from the database.","responses":{"200":{"description":"List of playlists returned successfully","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true},"playlists":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"tag":{"type":"string"}}}}}},"examples":{"Successfully get":{"value":{"error":null,"playlists":[{"id":1,"name":"game 1","tag":"{}"}]}}}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}}}}},"/api/music/musics":{"parameters":[],"post":{"summary":"Get music tracks from a specific playlist","description":"Retrieves all music tracks associated with a given playlist ID.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"}}}}}},"responses":{"200":{"description":"List of music tracks retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"null"},"musics":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"playlist_id":{"type":"integer"},"name":{"type":"string"},"author":{"type":"string"},"filename":{"type":"string"},"tag":{"type":"string"}}}}}},"examples":{"Successful post":{"value":{"error":null,"musics":[{"id":1,"playlist_id":1,"name":"Седая ночь","author":"Юрий Шатунов","filename":"audio.mp3","tag":"{}"}]}}}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Id not in body":{"value":{"error":{"error_code":0,"msg":"id not in body"}}}}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}}}}},"/api/music/like":{"parameters":[],"get":{"summary":"Get liked music","description":"Retrieves all music liked by the authenticated user.","responses":{"200":{"description":"List of liked music returned successfully","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true},"liked":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"playlist_id":{"type":"integer"},"name":{"type":"string"},"author":{"type":"string"},"filename":{"type":"string"},"tag":{"type":"string"}}}}}},"examples":{"Successful get":{"value":{"error":null,"playlists":[{"id":1,"name":"game 1","tag":"{}"}]}}}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}}}},"put":{"summary":"Like a music track","description":"Adds a like for a specific music track by the authenticated user.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"}}}}}},"responses":{"200":{"description":"Like added successfully","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true}}},"examples":{"Successful like":{"value":{"error":null}}}}}},"400":{"description":"Error adding like","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Id not in body":{"value":{"error":{"error_code":0,"msg":"id not in body"}}},"Already got a like":{"value":{"error":{"error_code":1,"msg":"Уже есть лайк"}}},"Error":{"value":{"error":{"error_code":12345,"msg":"Ошибка"}}}}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}}}},"delete":{"summary":"Unlike a music track","description":"Removes a like for a specific music track by the authenticated user.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"}}}}}},"responses":{"200":{"description":"Like removed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","nullable":true}}},"examples":{"Successful unlike":{"value":{"error":null}}}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}}}}},"/api":{"parameters":[]},"/api/music/m/{filename}":{"parameters":[],"get":{"summary":"Stream an audio file","description":"Streams an audio file and supports range requests for partial content.","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Audio file streamed successfully","content":{"audio/mpeg":{"schema":{"type":"string","format":"binary"}}}},"206":{"description":"Partial content streamed successfully","content":{"audio/mpeg":{"schema":{"type":"string","format":"binary"}}}},"401":{"description":"Unauthorized access","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Unauthorized":{"value":{"error":{"error_code":2,"msg":"Unauthorized"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Forbidden":{"value":{"error":{"error_code":3,"msg":"Forbidden"}}}}}}},"404":{"description":"File not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"File not found":{"value":{"error":{"error_code":404,"msg":"File not found"}}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"error_code":{"type":"integer"},"msg":{"type":"string"}}}}},"examples":{"Stream error":{"value":{"error":{"error_code":500,"msg":"err"}}},"Stream error in range":{"value":{"error":{"error_code":501,"msg":"err"}}}}}}}}}}}};
  // Build a system
  const ui = SwaggerUIBundle({
    spec: spec,
    dom_id: '#swagger-ui',
    deepLinking: true,
    presets: [
      SwaggerUIBundle.presets.apis,
      SwaggerUIStandalonePreset
    ],
    plugins: [
      SwaggerUIBundle.plugins.DownloadUrl
    ],
    layout: "StandaloneLayout"
  })
  window.ui = ui
}
</script>
</body>
</html>
